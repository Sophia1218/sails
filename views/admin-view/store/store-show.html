<!DOCTYPE html>
<html lang="en" ng-app="sails-admin" ng-controller='StoreShowCtrl'>
  <head>
  
	<!-- Head meta, css or library include -->
	<% include ../../layout/head-include.html %>
		

	<!-- admin page css -->	
	<link href="/stylesheets/style-admin.css" rel="stylesheet">

	<!-- Title -->
    <title>Store - {{store._id}}</title>

  </head>

  <body>

    <!-- Fixed Top Navigation Bar Template -->
	<% include ../../layout/top-navbar.html %>



	<!-- Main Container -->
    <div class="container">

		<div class="jumbotron">

			<!-- left navigation bar -->
			<% include ../layout/left-navbar.html %>
			
			<div style="padding-left:230px;">

				<!-- Store info -->
				<div class="panel panel-default">	
					<div class="panel-heading">Store - {{selectedStore._id}}</div>
					<table class="table">
						<thead>
							<th>_id</th>
							<th>name</th>
							<th>icon</th>				
							<th>link</th>
							<th>phone</th>
							<th>memo</th>
							<th>floorId</th>
							<th></th>																
						</thead>
						<tbody>
							<tr id="{{selectedStore._id}}">				
								<td>
									<a href="/admin/store/show/{{store._id}}" ng-bind="selectedStore._id"></a>
								</td>
								<td ng-bind="selectedStore.name"></td>
								<td>
									<img ng-src="{{selectedStore.icon}}" alt="store icon" width="100"/>
								</td>					
								<td ng-bind="selectedStore.link"></td>
								<td ng-bind="selectedStore.phone"></td>	
								<td ng-bind="selectedStore.memo"></td>	
								<td ng-bind="selectedStore.floorId"></td>
								<td>
									<a data-toggle="modal" class="btn btn-default" href="#store-edit-dialog" 
										ng-click="selectStore(selectedStore)">
										<span class="glyphicon glyphicon-edit"></span>
									</a>					
								</td>																	
							</tr>
						</tbody>		
					</table>

				</div>
	

				<!-- Ad List of store -->
				<div class="panel panel-default" ng-controller='AdListCtrl'>	
					<div class="panel-heading">

						<!-- Add store form block -->
						<div id="add-block">
							<input class="form-control" placeholder="Ad Name" name="name" maxlength="30">
							<input class="form-control" placeholder="Ad Price" name="price" maxlength="15">
							<input class="form-control" placeholder="Ad Description" name="desc" maxlength="100">
							<button class="btn btn-primary" data-loading-text="Add..." ng-click="addAd($event)">Add New Ad</button>
							<div class="alert alert-danger error-msg">
								<span class="label label-danger">Error</span> <span class="errorText"></span>
							</div>
						</div>

						<!-- Stores info -->						
						<h3>Ads - Total Count: <span ng-bind="ads.length"></span></h3>
						<p></p>

					</div>
					<table class="table">
						<thead>
							<th>_id</th>
							<th>name</th>
							<th>image</th>				
							<th>price</th>
							<th>startTime</th>
							<th>endTime</th>
							<th>desc</th>
							<th>storeId</th>
							<th></th>
							<th></th>
						</thead>
						<tbody>
							<tr ng-repeat="ad in ads" id="{{ad._id}}">				
								<td>
									<a href="#/admin/ad/show/{{ad._id}}" ng-bind="ad._id"></a>
								</td>
								<td ng-bind="ad.name"></td>
								<td>
									<img ng-src="{{ad.image}}" alt="ad icon" width="100"/>
								</td>					
								<td ng-bind="ad.price"></td>
								<td ng-bind="ad.startTime"></td>	
								<td ng-bind="ad.endTime"></td>	
								<td ng-bind="ad.desc"></td>	
								<td ng-bind="ad.storeId"></td>
								<td>
									<a data-toggle="modal" class="btn btn-default" href="#ad-edit-dialog" ng-click="selectAd(ad)">
										<span class="glyphicon glyphicon-edit"></span>
									</a>					
								</td>						
								<td>
									<a data-toggle="modal" class="btn btn-default" ng-click="deleteDialogSetup(ad)">
										<span class="glyphicon glyphicon-remove"></span>
									</a>					
								</td>																									
							</tr>
						</tbody>			
					</table>
							
					<!-- Delete dialog -->
					<% include ../layout/delete-confirm-dialog.html %>	

				</div>

			</div>	

		</div>

	</div>	

	<!-- Edit and Delete Dialog -->
	<% include ../store/store-edit-dialog.html %>
	<% include ../ad/ad-edit-dialog.html %>

	<!-- Body library include -->
	<% include ../../layout/body-include.html %>

    <!-- Controller -->
	<script src="/js/admin/controller/app.js"></script>        
    <script src="/js/admin/controller/storeContrl.js"></script>
	<script src="/js/admin/controller/adContrl.js"></script>
    
  </body>

</html>